<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Home</title>
    <!-- Bootstrap Import -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/jquery.easing.1.3.min.js"></script>
    <script type="text/javascript" src="js/transition.js"></script>
    <script type="text/javascript" src="js/jquery-confirm.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <script src="cordova.js"></script>

    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/jquery-confirm.css">

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Prompt" rel="stylesheet">

    <style>
        #title {
            color: #666666;
            letter-spacing: 2px;
        }

        .no-pd {
            padding-right: 0px;
            padding-left: 0px;
            font-size: 120%;
        }

        hr {
            margin-top: 0;
        }

        .i-del, .i-edit{
            color: #666666;
        }

        .collapse{
            margin-top: 1%; 
            background: #fafafa; 
            padding-top: 5%; 
            padding-bottom: 5%;
            border-radius: 1%;
        }
    </style>

    <script>
        $(document).ready(function () { 
            margin = $("#navs-menu").outerHeight()*3;
            $("#ctn-btm").css('padding-bottom', margin);
            margin = $("#ctn-btm").outerHeight();
            $("#big-ctn").css('margin-bottom', margin); 
            
            $("style").append('.jconfirm .jconfirm-box{margin-bottom: 60%;}');
        });

        function disactive(arg) {
            nav_menu = ['home', 'add', 'edit', 'del'];
            for (i = 0; i < 4; i++) {
                if (nav_menu[i] != arg) {
                    if ($("#i-" + nav_menu[i]).hasClass('active')) $("#i-" + nav_menu[i]).removeClass('active');
                }
            }
        }

        function menu(arg) {
            // Animate
            disactive(arg);
            $("#i-" + arg).fadeOut(100).fadeIn(100, function () {
                $("#i-" + arg).addClass('active');
            });

            if (arg == "add") {
                goto = "sale.html";
                transition_page_back(goto);
            } else if (arg == "edit") {
                // show edit all
                $(".i-edit").attr('hidden', false);
                $(".i-del").attr('hidden', true);
            } else if (arg == "del") {
                // show trash all 
                $(".i-del").attr('hidden', false);
                $(".i-edit").attr('hidden', true);
            }
        }

        function show_cus(arg) {
            goto = "customer_show.html?cus=" + arg;
            transition_page_next(goto);
        }

        function edit_prod(arg) {
            name = $("#name-"+arg).text();
            $.confirm({
              title: name,
              content: '<div class="row" style="margin-top: 2%; margin-bottom: 2%;"><div class="col-1"></div><div class="col-5 text-center" style="font-size: 110%; font-weight: bold;">ราคา</div><div class="col-1"></div><div class="col-4 text-center" style="font-size: 110%; font-weight: bold;">จำนวน</div><div class="col-1"></div></div><div class="row"><div class="col-1"></div><div class="col-5 text-center"><input id="edt-price" type="number" class="input-cf" placeholder="'+$("#price-"+arg).text()+'" autofocus></div><div class="col-1">x</div><div class="col-4 text-center"><input id="edt-amt" type="number" class="input-cf" placeholder="'+$("#amount-"+arg).text()+'"></div><div class="col-1"></div></div>',
              backgroundDismiss: true,
              buttons: {
                ยกเลิก: function () {
                    //$(".jconfirm .jconfirm-box").css('margin-bottom', '5%');
                  },
                formSubmit: {
                  text: 'ตกลง',
                  btnClass: 'btn-danger',
                  action: function () {
                    console.log($("#edt-price").val());
                    console.log($("#edt-amt").val());
                    $("#price-"+arg).text($("#edt-price").val()); 
                    $("#amount-"+arg).text($("#edt-amt").val());
                  }
                }
              }
            }); 
        }

        function del_prod(arg){
            name = $("#name-"+arg).text();
            $("style").append('.jconfirm .jconfirm-box{margin-bottom: 5%;}');
            $.confirm({
                title: 'ลบรายการ',
                content: 'ต้องการลบ '+name+' หรือไม่',
                backgroundDismiss: true,
                buttons: {
                  ยกเลิก: function () {},  
                  formSubmit: {
                    text: 'ตกลง',
                    btnClass: 'btn-danger',
                    action: function () {
                        $("#prod-"+arg).remove(); 
                        $("#hr-"+arg).remove();
                        $("#collapse-"+arg).remove();

                    }
                  }
                }  
            });          
        }
        
        function collapse(arg){
            // 4 is num of prod
            for (i = 0; i < 4; i++) {
                if (i != arg && $("#collapse-" + i).is(":visible")) {
                    $("#collapse-" + i).slideToggle('collapse');
                }
            }
            if(arg == 1){
                $("#collapse-"+arg).slideToggle('collapse', function(){
                    var body = $("body, html");
                    var top = $("#ctn-btm").offset().top/7;
                    body.animate({scrollTop :top}, 300);
                });
            }else if(arg == 2){
                $("#collapse-"+arg).slideToggle('collapse', function(){
                    var body = $("body, html");
                    var top = $("#ctn-btm").offset().top/4;
                    body.animate({scrollTop :top}, 600);
                });
            }else if(arg >= 3){
                $("#collapse-"+arg).slideToggle('collapse', function(){
                    var body = $("body, html");
                    var top = $("#ctn-btm").offset().top;
                    body.animate({scrollTop :top}, 1400);
                });
            }
        }

        function edit_discount(){
            $(".jconfirm .jconfirm-box").css('margin-bottom', '50%');
           $.confirm({
                title: 'ลด',
                content: '<input id="edt-discount" type="number" class="input-cf" style="width: 75%; margin-left: 12.5%; margin-top: 2%;" placeholder="'+$("#discount").text()+'" autofocus>',
                backgroundDismiss: true,
                buttons: {
                  ยกเลิก: function () {
                    $(".jconfirm .jconfirm-box").css('margin-bottom', '5%');
                  },
                  formSubmit: {
                    text: 'ตกลง',
                    btnClass: 'btn-danger',
                    action: function () {
                        $("#discount").text($("#edt-discount").val());
                        $(".jconfirm .jconfirm-box").css('margin-bottom', '5%');
                    }
                  }
                }  
            }); 
        }

        function clearAll(){
            // เคลียค่าทั้งหมดและกลับไปหน้า sale เพื่อเริ่มบิลใหม่
        }
    </script>
</head>

<body style="overflow: auto;">
    <!-- Nav menu top -->
    <div class="row fixed-top navs">
        <div class="col-1 text-center" onclick="transition_page_back('sale.html')">
            <i id="i-back" class="fas fa-angle-left"></i>
        </div>
        <div class="col-10 text-center">
            <h5 id="h5-title">ตรวจสอบ</h5>
        </div>
        <div class="col-1">
        </div>
    </div>
    <br>

    <!-- End big container -->
    <div id="big-ctn" class="container justify-content-center" style="margin-top: 15%;">
        <div class="row mg-7">
            <div class="col-12 text-center">
                <h5 id="cus-title">สมพงศ์</h5>
            </div>
        </div>
        <!-- Show -->
        <div id="prod-1" class="row">
            <span id="id-prod-1" hidden>id</span>
            <div class="col-1 text-center no-pd">
                <i id="i-del-1" class="fa fa-trash-alt i-del" onclick="del_prod('1');" hidden></i>
                <i id="i-edit-1" class="fa fa-edit i-edit" onclick="edit_prod('1');" hidden></i>
                <!--<i id="i-check-1" class="fa fa-check i-check" onclick="update_prod('1');" hidden style="color: green;"></i>-->
            </div>
            <div id="name-1" class="col-6 text-center no-pd" onclick="collapse('1');">ไฟหน้าเรนเจอร์ปี 08</div>
            <div id="price-1" class="col-3 text-center no-pd" onclick="collapse('1');">500</div>
            <span>x</span>
            <div id="amount-1" class="col-1 text-center no-pd" onclick="collapse('1');">5</div>
        </div>

        <!-- Collapse-1 -->
        <div id="collapse-1" class="container collapse" onclick="collapse('1');">
            <div class="row">
                <div class="col-12 text-center">
                    <img id='img' src="https://c2.staticflickr.com/4/3891/14354989289_2eec0ba724_b.jpg" alt="" style="width: 96%; height: 96%; border-radius: 3px;">
                </div>
            </div>
            <div class="row" style="margin-bottom: 4%; margin-top: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รหัส : </div>
                <div class="col-4 text-center no-pd">fdrng0408</div>
                <div class="col-2"></div>
            </div>
            <div class="row" style="margin-bottom: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รวม : </div>
                <div class="col-4 text-center no-pd">5000</div>
                <div class="col-2"></div>
            </div>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">คงเหลือ : </div>
                <div class="col-4 text-center no-pd">15</div>
                <div class="col-2"></div>
            </div>
        </div><hr id="hr-1" style="margin-top: 5%;">

        <div id="prod-2" class="row">
            <span id="id-prod-2" hidden>id</span>
            <div class="col-1 text-center no-pd">
                <i id="i-del-2" class="fa fa-trash-alt i-del" onclick="del_prod('2');" hidden></i>
                <i id="i-edit-1" class="fa fa-edit i-edit" onclick="edit_prod('2');" hidden></i>
                <!--<i id="i-check-1" class="fa fa-check i-check" onclick="update_prod('1');" hidden style="color: green;"></i>-->
            </div>
            <div id="name-2" class="col-6 text-center no-pd" onclick="collapse('2');">ไฟหน้าเรนเจอร์ปี 08</div>
            <div id="price-2" class="col-3 text-center no-pd" onclick="collapse('2');">500</div>
            <span>x</span>
            <div id="amount-2" class="col-1 text-center no-pd" onclick="collapse('2');">5</div>
        </div>

        <!-- Collapse-2 -->
        <div id="collapse-2" class="container collapse" onclick="collapse('2');">
            <div class="row">
                <div class="col-12 text-center">
                    <img id='img' src="https://c2.staticflickr.com/4/3891/14354989289_2eec0ba724_b.jpg" alt="" style="width: 96%; height: 96%; border-radius: 3px;">
                </div>
            </div>
            <div class="row" style="margin-bottom: 4%; margin-top: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รหัส : </div>
                <div class="col-4 text-center no-pd">fdrng0408</div>
                <div class="col-2"></div>
            </div>
            <div class="row" style="margin-bottom: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รวม : </div>
                <div class="col-4 text-center no-pd">5000</div>
                <div class="col-2"></div>
            </div>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">คงเหลือ : </div>
                <div class="col-4 text-center no-pd">15</div>
                <div class="col-2"></div>
            </div>
        </div><hr id="hr-2" style="margin-top: 5%;">

        <div id="prod-3" class="row">
            <span id="id-prod-3" hidden>id</span>
            <div class="col-1 text-center no-pd">
                <i id="i-del-3" class="fa fa-trash-alt i-del" onclick="del_prod('3');" hidden></i>
                <i id="i-edit-1" class="fa fa-edit i-edit" onclick="edit_prod('3');" hidden></i>
                <!--<i id="i-check-1" class="fa fa-check i-check" onclick="update_prod('1');" hidden style="color: green;"></i>-->
            </div>
            <div id="name-3" class="col-6 text-center no-pd" onclick="collapse('3');">ไฟหน้าเรนเจอร์ปี 08</div>
            <div id="price-3" class="col-3 text-center no-pd" onclick="collapse('3');">500</div>
            <span>x</span>
            <div id="amount-3" class="col-1 text-center no-pd" onclick="collapse('3');">5</div>
        </div>

        <!-- Collapse-3 -->
        <div id="collapse-3" class="container collapse" onclick="collapse('3');">
            <div class="row">
                <div class="col-12 text-center">
                    <img id='img' src="https://c2.staticflickr.com/4/3891/14354989289_2eec0ba724_b.jpg" alt="" style="width: 96%; height: 96%; border-radius: 3px;">
                </div>
            </div>
            <div class="row" style="margin-bottom: 4%; margin-top: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รหัส : </div>
                <div class="col-4 text-center no-pd">fdrng0408</div>
                <div class="col-2"></div>
            </div>
            <div class="row" style="margin-bottom: 4%;">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">รวม : </div>
                <div class="col-4 text-center no-pd">5000</div>
                <div class="col-2"></div>
            </div>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-4 text-center no-pd">คงเหลือ : </div>
                <div class="col-4 text-center no-pd">15</div>
                <div class="col-2"></div>
            </div>
        </div><hr id="hr-3" style="margin-top: 5%;">
    </div>
    <!-- End big container -->


    <div id="ctn-btm" class="container fixed-bottom" style="background: #f3f3f3;">
        <div class="container">
            <div class="row">
                <div class="col-5 text-left" onclick="edit_discount();">
                    <h5 class="h5-title" style="font-size: 130%;">ลด :
                        <span style="color: green;" id="discount">1000</span>
                    </h5>
                </div>
                <div class="col-7 text-center">
                    <h5 class="h5-title" style="font-size: 130%;">รวม :
                        <span  style="color: red;"id="net">500000</span>
                    </h5>
                </div>
            </div>
            <div class="row">
                <div class="col-4 text-center" style="padding-left: 0; padding-right: 0;">
                    <button class="mbtn-cancle" onclick="clearAll();">ยกเลิก</button>
                </div>
                <div class="col-8 text-center" style="padding-right: 0;">
                    <button class="mbtn" onclick="transition_page_next('sale_info.html');">ต่อไป</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Nav menu bottom -->
    <div id="navs-menu" class="row fixed-bottom navs">
        <div class="col-3 text-center" onclick="transition_page_back('index.html');">
            <i id="i-home" class="fas fa-home menu"></i>
        </div>
        <div class="col-3 text-center" onclick="menu('add')">
            <i id="i-add" class="fas fa-plus menu"></i>
        </div>
        <div class="col-3 text-center" onclick="menu('edit')">
            <i id="i-edit" class="fas fa-edit menu"></i>
        </div>
        <div class="col-3 text-center" onclick="menu('del')">
            <i id="i-del" class="fa fa-trash-alt menu"></i>
        </div>
    </div>
    <!-- End Nav menu bottom -->
</body>

</html>